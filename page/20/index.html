<!DOCTYPE html>


<html lang="zh-CN">
  

    <head>
      <meta charset="utf-8" />
        
      <meta name="description" content="个人公众号《骇客与画家》" />
      
      <meta
        name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1"
      />
      <title> 高行行的个人博客</title>
  <meta name="generator" content="hexo-theme-ayer">
      
      <link rel="shortcut icon" href="/favicon.ico" />
       
<link rel="stylesheet" href="/dist/main.css">

      
<link rel="stylesheet" href="/css/fonts/remixicon.css">

      
<link rel="stylesheet" href="/css/custom.css">
 
      <script src="https://cdn.staticfile.org/pace/1.2.4/pace.min.js"></script>
       
 

      <link
        rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/@sweetalert2/theme-bulma@5.0.1/bulma.min.css"
      />
      <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.19/dist/sweetalert2.min.js"></script>

      <!-- mermaid -->
      
      <style>
        .swal2-styled.swal2-confirm {
          font-size: 1.6rem;
        }
      </style>
    </head>
  </html>
</html>


<body>
  <div id="app">
    
      
    <main class="content on">
      
<section class="cover">
    
      
      <a class="forkMe" href="https://github.com/Shen-Yu/hexo-theme-ayer"
        target="_blank"><img width="149" height="149" src="/images/forkme.png"
          class="attachment-full size-full" alt="Fork me on GitHub" data-recalc-dims="1"></a>
    
  <div class="cover-frame">
    <div class="bg-box">
      <img src="/images/cover1.jpg" alt="image frame" />
    </div>
    <div class="cover-inner text-center text-white">
      <h1><a href="/">高行行的个人博客</a></h1>
      <div id="subtitle-box">
        
        <span id="subtitle"></span>
        
      </div>
      <div>
        
      </div>
    </div>
  </div>
  <div class="cover-learn-more">
    <a href="javascript:void(0)" class="anchor"><i class="ri-arrow-down-line"></i></a>
  </div>
</section>



<script src="https://cdn.staticfile.org/typed.js/2.0.12/typed.min.js"></script>


<!-- Subtitle -->

  <script>
    try {
      var typed = new Typed("#subtitle", {
        strings: ['面朝大海，春暖花开', '科技需要人文的浇灌', '想要的都拥有，得不到的都释怀'],
        startDelay: 0,
        typeSpeed: 200,
        loop: true,
        backSpeed: 100,
        showCursor: true
      });
    } catch (err) {
      console.log(err)
    }
  </script>
  
<div id="main">
  <section class="outer">
  
  <ul class="ads">
    
        <li>
            <a target="_blank" rel="noopener" href="https://curl.qcloud.com/kvO7hb43">
                <img src="https://pic.imgdb.cn/item/62174b452ab3f51d912a5ccc.jpg" width="300" alt="云服务器限时秒杀">
            </a>
        </li>
    
        <li>
            <a target="_blank" rel="noopener" href="https://www.vultr.com/?ref=8630075">
                <img src="https://pic.imgdb.cn/item/62174b452ab3f51d912a5cd7.png" width="300" alt="vultr优惠vps">
            </a>
        </li>
    
</ul>
  
  
  

<div class="notice" style="margin-top:50px">
    <i class="ri-heart-fill"></i>
    <div class="notice-content" id="broad"></div>
</div>
<script type="text/javascript">
    fetch('https://v1.hitokoto.cn')
        .then(response => response.json())
        .then(data => {
            document.getElementById("broad").innerHTML = data.hitokoto;
        })
        .catch(console.error)
</script>

<style>
    .notice {
        padding: 20px;
        border: 1px dashed #e6e6e6;
        color: #969696;
        position: relative;
        display: inline-block;
        width: 100%;
        background: #fbfbfb50;
        border-radius: 10px;
    }

    .notice i {
        float: left;
        color: #999;
        font-size: 16px;
        padding-right: 10px;
        vertical-align: middle;
        margin-top: -2px;
    }

    .notice-content {
        display: initial;
        vertical-align: middle;
    }
</style>
  
  <article class="articles">
    
    
    
    
    <article
  id="post-使用-docker-安装-PostgreSQL-数据库"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2019/08/14/%E4%BD%BF%E7%94%A8-docker-%E5%AE%89%E8%A3%85-PostgreSQL-%E6%95%B0%E6%8D%AE%E5%BA%93/"
    >使用 docker 安装 PostgreSQL 数据库(翻译)</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2019/08/14/%E4%BD%BF%E7%94%A8-docker-%E5%AE%89%E8%A3%85-PostgreSQL-%E6%95%B0%E6%8D%AE%E5%BA%93/" class="article-date">
  <time datetime="2019-08-14T15:56:00.000Z" itemprop="datePublished">2019-08-14</time>
</a>    
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <blockquote>
<p>原文地址: <a target="_blank" rel="noopener" href="https://hackernoon.com/dont-install-postgres-docker-pull-postgres-bee20e200198">https://hackernoon.com/dont-install-postgres-docker-pull-postgres-bee20e200198</a></p>
</blockquote>
<h2 id="获取Postgres-Docker镜像"><a href="#获取Postgres-Docker镜像" class="headerlink" title="获取Postgres Docker镜像"></a>获取Postgres Docker镜像</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull postgres</span><br></pre></td></tr></table></figure>

<p>:后跟上你上指定的镜像版本,上面的默认是postgres:latest</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull postgres:[tag_you_want]</span><br></pre></td></tr></table></figure>

<p>创建目录将本地挂载点作为数据卷映射到容器内</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p $HOME/docker/volumes/postgres</span><br></pre></td></tr></table></figure>

<h2 id="运行Postgres容器"><a href="#运行Postgres容器" class="headerlink" title="运行Postgres容器"></a>运行Postgres容器</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run --rm   --name pg-docker -e POSTGRES_PASSWORD=root -d -p 5432:5432 -v $HOME/docker/volumes/postgres:/var/lib/postgresql/data  postgres</span><br></pre></td></tr></table></figure>

<blockquote>
<p>以下翻译使用google翻译得来的，不太准确</p>
</blockquote>
<p>我们为docker run命令提供了几个选项：</p>
<ul>
<li>rm：退出时自动删除容器及其关联的文件系统。通常，如果我们运行大量短期容器，最好将rm标志传递给docker run命令以进行自动清理并避免磁盘空间问题。我们总是可以使用v选项（如下所述）将数据持久化到容器的生命周期之外</li>
<li>name：容器的标识名称。我们可以选择任何我们想要的名字。请注意，两个现有（即使它们已停止）容器不能具有相同的名称。要重新使用名称，您需要将rm标志传递给docker run命令，或者使用命令docker rm [container name]显式删除容器。<br>-e：使用值docker将名称为POSTGRES_PASSWORD的环境变量暴露给容器。此环境变量设置PostgreSQL的超级用户密码。我们可以将POSTGRES_PASSWORD设置为我们喜欢的任何东西。我只是选择它作为船坞进行演示。您可以设置其他环境变量。这些包括POSTGRES_USER和POSTGRES_DB。POSTGRES_USER设置超级用户名。如果未提供，则超级用户名默认为postgres。POSTGRES_DB设置要设置的默认数据库的名称。如果未提供，则默认为POSTGRES_USER的值。<br>-d：以分离模式或换句话说，在后台启动容器。<br>-p：将localhost上的端口5432绑定到容器内的端口5432。此选项使运行在容器一侧的应用程序能够连接到在容器内运行的Postgres服务器。<br>-v：将主机上的$ HOME &#x2F; docker &#x2F; volumes &#x2F; postgres挂载到容器内创建的容器侧卷路径&#x2F; var &#x2F; lib &#x2F; postgresql &#x2F; data中。这可确保即使在删除容器后postgres数据仍然存在。</li>
</ul>
<h2 id="连接到Postgres"><a href="#连接到Postgres" class="headerlink" title="连接到Postgres"></a>连接到Postgres</h2><p>一旦容器运行正常，从应用程序连接到该容器与连接到在docker容器外部运行的Postgres实例没有什么不同。例如，要使用psql进行连接，我们可以执行</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">psql -h localhost -U postgres -d postgres</span><br></pre></td></tr></table></figure>

 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/docker/" rel="tag">docker</a></li></ul>

    </footer>
  </div>

   
    
</article>

    
    <article
  id="post-玩转数据结构"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2019/08/14/%E7%8E%A9%E8%BD%AC%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"
    >玩转数据结构</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2019/08/14/%E7%8E%A9%E8%BD%AC%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" class="article-date">
  <time datetime="2019-08-14T15:03:43.000Z" itemprop="datePublished">2019-08-14</time>
</a>    
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <p><img src="https://raw.githubusercontent.com/gaohanghang/images/master/img20190814230421.png"></p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/java/" rel="tag">java</a></li></ul>

    </footer>
  </div>

   
    
</article>

    
    <article
  id="post-产品观点"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2019/08/14/%E4%BA%A7%E5%93%81%E8%A7%82%E7%82%B9/"
    >产品观点</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2019/08/14/%E4%BA%A7%E5%93%81%E8%A7%82%E7%82%B9/" class="article-date">
  <time datetime="2019-08-14T13:07:58.000Z" itemprop="datePublished">2019-08-14</time>
</a>    
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <blockquote>
<p>今天喝咖啡，听旁边人聊产品方向选择挺有意思，所以写下来</p>
</blockquote>
<p>产品要比较竞品的优点，而不是缺点，从比较优点中找出区分点</p>
<p>比如淘宝就是全</p>
<p>而网易严选是闭着眼买不到差的</p>
<p>考拉的奶粉闭着眼买不到假的</p>
<p>虎扑上卖闭着眼买不到假的</p>
<p>严选只卖基本款，不给用户选择的机会</p>
<p>如果选择的产品方向是买到的都是真的要营造权威感，比如假设卖奶粉的公司是一家医药公司，会赢得客户的信任。</p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E9%81%93%E7%90%86/" rel="tag">道理</a></li></ul>

    </footer>
  </div>

   
    
</article>

    
    <article
  id="post-程序员如何自我学习？阿里资深技术专家这样做"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2019/08/14/%E7%A8%8B%E5%BA%8F%E5%91%98%E5%A6%82%E4%BD%95%E8%87%AA%E6%88%91%E5%AD%A6%E4%B9%A0%EF%BC%9F%E9%98%BF%E9%87%8C%E8%B5%84%E6%B7%B1%E6%8A%80%E6%9C%AF%E4%B8%93%E5%AE%B6%E8%BF%99%E6%A0%B7%E5%81%9A/"
    >程序员如何自我学习？阿里资深技术专家这样做</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2019/08/14/%E7%A8%8B%E5%BA%8F%E5%91%98%E5%A6%82%E4%BD%95%E8%87%AA%E6%88%91%E5%AD%A6%E4%B9%A0%EF%BC%9F%E9%98%BF%E9%87%8C%E8%B5%84%E6%B7%B1%E6%8A%80%E6%9C%AF%E4%B8%93%E5%AE%B6%E8%BF%99%E6%A0%B7%E5%81%9A/" class="article-date">
  <time datetime="2019-08-14T04:55:03.000Z" itemprop="datePublished">2019-08-14</time>
</a>    
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <blockquote>
<p>原文地址: <a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000015859552">https://segmentfault.com/a/1190000015859552</a></p>
<p>作者：雷卷</p>
<p>小结：</p>
<p> 1.阅读图书文档 2.视频学习 3.动手实践 4.熟练掌握工具 5.参加技术大会 6. 买个好电脑 - 来自阿里技术评论</p>
</blockquote>
<blockquote>
<p><strong>摘要：</strong> 行业发展得太快，你必须学习，纯靠经验积累行不通，技术淘汰的速度远大于你经验积累的速度。 非鸡汤：不要和程序员谈自己的编程历史，很多的经验在今天已经不适用了。只要 2-3 年不关注技术，就基本快和程序员和编程绝缘啦，不是绝对，但是通常不会错。</p>
</blockquote>
<p>阿里妹导读：互联网信息技术的迭代周期快是有目共睹的，因此，学习、更新知识这件事就变得相当重要。今天，阿里资深技术专家雷卷，将分享自己平时学习的方法和心得，希望能够带给大家一些启发（本文推荐养家糊口之外有点小追求的同学阅读，Ph.D、paper 秒懂的学霸同学可自动忽略～）。</p>
<h2 id="1-为何要持续学习，靠经验积累不行吗？"><a href="#1-为何要持续学习，靠经验积累不行吗？" class="headerlink" title="1. 为何要持续学习，靠经验积累不行吗？"></a>1. 为何要持续学习，靠经验积累不行吗？</h2><p>很多人都说程序员的薪资水平不错，可以媲美医生和律师。而程序员和医生、律师的不同点在于持续学习上。不是说医生和律师不需要学习，医生、律师能够凭之前的 case 积累非常多的经验（这也是大家看病喜欢找年纪大的医生的原因之一），而且这些经验很大程度上可以被复用（很多病因和判罚案例带有相似性）。</p>
<p>程序员这个职业则不同，主要是因为行业更新得太快，积累的经验很快就不适用了。</p>
<p>举几个例子：</p>
<p>如果你是 Java 程序员，且非常擅长 Struts + JSP 开发，解决了很多 Struts 框架的问题。但今天，这部分知识已经过时，需要重新学习。如果仍坚持使用之前的技术，会给同事和公司带来很大的技术负担。大家回顾一下自己从毕业到现在有多少技术都已经看不到踪影了。就阿里巴巴内部来说，很多技术也都已经被淘汰不用了。</p>
<p>就编程来说，有很多编程语言和门第之争。你在这个语言积累的经验到另外一个语言就未必行得通。我很少听说 Java 组招一个.Net 的资深工程师，即便有，那也是给产品做.Net SDK client 的。</p>
<p>软件的经验积累还会体现在一个架构设计上。很多同学会说经验积累得多，架构就设计得好，这在今天来说也未必。大家都在云上啦，云上提供的服务基本都是类似的，架构思路和使用的云上服务基本一致。</p>
<p>Amazon 的售前人员个个都是行业架构师，给你很好的架构和解决方案，包括迁移方案，所以你就知道架构的门槛了。非资深程序员可以花半天时间看一下 Learn how to design large-scale systems （ <a target="_blank" rel="noopener" href="https://github.com/donnemartin/system-design-primer" title="https://github.com/donnemarti...">https://github.com/donnemarti...</a> ），虽然说是 primer，但是还是非常实用的，配合一下 Awesome list ( <a target="_blank" rel="noopener" href="https://github.com/topics/awesome" title="https://github.com/topics/awe...">https://github.com/topics/awe...</a> ) 架构思路和模式都有了。框架和开发包的具体特性和对比了解了，一天就能够成为架构师。</p>
<p>有个笑话：一个产品经理找一个有个性的设计师去设计原型和交互稿。该设计师头都没有抬说道：“你抄的是哪个网站或 App? 告诉我，我下午给你做。”如果你看了 system design primer，当有架构师找你，你就可以说你参考的是哪个网站的架构。我们回头理解一下然后按照这个设计编写代码就可以了。在云上，架构设计基本都是 pattern 的，再花很多时间讨论架构设计，就有点想不通了。但对云上的产品做彻底的理解，这个还是需要的。 行业发展得太快，你必须学习，纯靠经验积累行不通，技术淘汰的速度远大于你经验积累的速度。</p>
<p>非鸡汤：不要和程序员谈自己的编程历史，很多的经验在今天已经不适用了。只要 2-3 年不关注技术，就基本快和程序员和编程绝缘啦，不是绝对，但是通常不会错。</p>
<p><img src="https://raw.githubusercontent.com/gaohanghang/images/master/img/20191221215442.png"></p>
<h2 id="2-工具要非常熟练"><a href="#2-工具要非常熟练" class="headerlink" title="2. 工具要非常熟练"></a>2. 工具要非常熟练</h2><p>有人跟我说：“不要吹啦，你就是 IDEA 使用得再熟练，也没有必要将学习和使用工具挂上钩吧。” 说句实在话，看到一些硅谷工程师的培训教程中他们对工具的熟练使用程度，我只能说我还是小白。</p>
<p>有一次和几个 google 的工程师吃饭聊天，问了一下他们遇到的哪些人比较牛？ 一个工程师说他的 leader 太牛了，在帮助他找 bug 的时候，工具和 debug 使用的熟练程度让人眼花缭乱。很多工具都是他听都没有听过的，而且 Python 脚本编写几乎如行云流水般。究其原因并非是这个 leader 一眼就能看出问题所在，有些问题他也是第一次遇到，但他在单位时间内尝试的次数特别多，就很快把问题给逼出来了。</p>
<p>非鸡汤：在排查问题和写代码上，如果你 1 个小时只能尝试一种方法，别人却能够尝试 10 次，那么别人就是比你牛。天下武功唯快不破，你后续写 demo、查问题、工具的熟练程度都会决定你学习和尝试新事物的速度。</p>
<h2 id="3-读书-amp-看文档"><a href="#3-读书-amp-看文档" class="headerlink" title="3. 读书 &amp; 看文档"></a>3. 读书 &amp; 看文档</h2><p>学习还需要系统化。并非单靠看一篇文章就能明白原理。</p>
<p>个人强烈推荐：</p>
<p><a target="_blank" rel="noopener" href="https://www.safaribooksonline.com/">https://www.safaribooksonline.com/</a></p>
<p>Safari 应该是出版社联盟，IT 类图书基本都能找到。两个小问题是：需要收费，一年大概 400 刀；图书都是英文的。 Safari Books Online 的图书非常全，几乎涵盖绝大多数出版社，我们熟知 oreilly, apress, manning, packtpub，addison wiley，而且更新速度非常快。另外 Sarafi 提供的 Learn path 也非常有用，能帮助你系统地了解一些技术，如 blockchain，ai，machine learnging 等等。现在视频资料也非常多，包括专家知识培训和一些技术大会的视频。</p> 
      <a class="article-more-link" href="/2019/08/14/%E7%A8%8B%E5%BA%8F%E5%91%98%E5%A6%82%E4%BD%95%E8%87%AA%E6%88%91%E5%AD%A6%E4%B9%A0%EF%BC%9F%E9%98%BF%E9%87%8C%E8%B5%84%E6%B7%B1%E6%8A%80%E6%9C%AF%E4%B8%93%E5%AE%B6%E8%BF%99%E6%A0%B7%E5%81%9A/"
        >阅读更多...</a
      >
       
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E9%81%93%E7%90%86/" rel="tag">道理</a></li></ul>

    </footer>
  </div>

   
    
</article>

    
    <article
  id="post-小白入门学习打日志"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2019/08/13/%E5%B0%8F%E7%99%BD%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0%E6%89%93%E6%97%A5%E5%BF%97/"
    >小白入门学习打日志</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2019/08/13/%E5%B0%8F%E7%99%BD%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0%E6%89%93%E6%97%A5%E5%BF%97/" class="article-date">
  <time datetime="2019-08-13T12:03:08.000Z" itemprop="datePublished">2019-08-13</time>
</a>    
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <blockquote>
<p>原文地址: <a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/jl9Rpr1JFJymWyJj5QK3yA">小白入门学习打日志</a></p>
</blockquote>
<p><strong>前言</strong></p>
<blockquote>
<p>只有光头才能变强。</p>
<p>文本已收录至我的GitHub仓库，欢迎Star：<a target="_blank" rel="noopener" href="https://github.com/ZhongFuCheng3y/3y">https://github.com/ZhongFuCheng3y/3y</a></p>
</blockquote>
<p>记得之前写过一篇：<a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s?__biz=MzI4Njg5MDA5NA==&mid=2247484402&idx=1&sn=786686c4d2abd958c535065de044701d&chksm=ebd742f3dca0cbe5f6f401e38391369f28287858125d52a1a169523dc4f9600e20335446a629&token=620000779&lang=zh_CN&scene=21#wechat_redirect">《阿里巴巴 Java开发手册》读后感</a>，之前自学时由于没怎么接触过打“日志”，所以《手册》中的“日志规约”我就先放一边去了。</p>
<p>而之前写了一篇：<a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s?__biz=MzI4Njg5MDA5NA==&mid=2247485368&idx=1&sn=59742409160a103eddaa6ca187a77256&chksm=ebd746b9dca0cfaffd61b35a810d806f7eea67c5a0dec820ae65be093d81abf49ac19ab1248b&token=2078489135&lang=zh_CN&scene=21#wechat_redirect">在公司做的项目和自己在学校做的有什么区别？</a>中就有提到：公司的项目不会有<code>e.printStackTrace();</code>这种代码的存在。因为这打印出来的错误信息<strong>没有日期、等级</strong>等等，分析起来不方便。</p>
<p>在工作中去服务器上查日志又是一个非常非常常见的操作，所以当初我又写了一篇 <a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s?__biz=MzI4Njg5MDA5NA==&mid=2247485440&idx=1&sn=85b40c173d66b62b3e870dd0e095c72c&chksm=ebd74901dca0c01727ed2cff30acc5d39948eda5bf4252f1d96526f951591f69edcfccbbad29&token=2078489135&lang=zh_CN&scene=21#wechat_redirect">工作中常用到的Linux命令</a>，里边就谈到了查日志时常用的Linux命令。</p>
<p>想着，既然接触日志也有一段时间了，不妨在回看《手册》，看看有什么要注意的地方，于是就有了这篇笔记。</p>
<h2 id="一、Java打日志的基础"><a href="#一、Java打日志的基础" class="headerlink" title="一、Java打日志的基础"></a>一、Java打日志的基础</h2><p>以前自己自学的时候，排查问题只会写下面的代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">   <span class="comment">// doSomething</span></span><br><span class="line">&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">    e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line">----------</span><br><span class="line"><span class="comment">// 查看某个数据的值时：</span></span><br><span class="line">System.out.println(xxxx);</span><br></pre></td></tr></table></figure>

<p>去到公司就发现上面的代码全不见了，剩下的是：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">LOGGER.info(<span class="string">&quot;begin to run Java3y:&#123;&#125;&quot;</span>, id);</span><br><span class="line">----</span><br><span class="line">LOGGER.error(<span class="string">&quot;excepiton occurs when run Java3y &#123;&#125;, exception&#123;&#125;&quot;</span>, id, e.toString());</span><br></pre></td></tr></table></figure>

<p>如果使用<code>e.printStackTrace();</code>的话，打印在控制的信息分析不方便：</p>
<p><img src="https://raw.githubusercontent.com/gaohanghang/images/master/img20190813202202.png" alt="打印在控制的信息分析不方便"></p>
<p>而我们将信息分<strong>等级和时间</strong>记录在服务器的磁盘上，有问题了就可以根据对应的信息去查找相关的日志(这样排查起来是十分方便的)：</p>
<p><img src="https://raw.githubusercontent.com/gaohanghang/images/master/img20190813202315.png" alt="服务器上的日志信息"></p>
<p>我们再来看一下一般的日志长什么样的：</p>
<p><img src="https://raw.githubusercontent.com/gaohanghang/images/master/img20190813202419.png"></p>
<p>例如：现在有人来反馈某某某用户好像收不到短信，给出<strong>发送时间和用户ID</strong>，我们就可以在日志上找出该用户在我们系统的发送状态（例如图上的：state:81，我们就认为是发送成功状态)</p>
<blockquote>
<p>谨慎地记录日志。生产环境禁止输出 debug 日志；有选择地输出 info 日志；如果使</p>
<p>用 warn 来记录刚上线时的业务行为信息，<strong>一定要注意日志输出量的问题，避免把服务器磁盘</strong></p>
<p><strong>撑爆</strong>，并记得及时删除这些观察日志。</p>
<p>大量地输出无效日志，不利于系统性能提升，也不利于快速定位错误点。记录日志时请思考：<strong>这些</strong></p>
<p><strong>日志真的有人看吗？看到这条日志你能做什么？能不能给问题排查带来好处？</strong></p>
</blockquote>
<h3 id="1-1什么叫做-打点-？"><a href="#1-1什么叫做-打点-？" class="headerlink" title="1.1什么叫做 打点 ？"></a>1.1什么叫做 打点 ？</h3><p>打日志最常见的就是用来打印出<strong>程序执行时的相关信息</strong>，用于快速定位问题和排查问题。我一开始也是这么理解的，但是其实还可以延伸一下。</p> 
      <a class="article-more-link" href="/2019/08/13/%E5%B0%8F%E7%99%BD%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0%E6%89%93%E6%97%A5%E5%BF%97/"
        >阅读更多...</a
      >
       
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/java/" rel="tag">java</a></li></ul>

    </footer>
  </div>

   
    
</article>

    
    <article
  id="post-Spring-data-jpa-query使用原生SQl，需要注意的坑"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2019/08/12/Spring-data-jpa-query%E4%BD%BF%E7%94%A8%E5%8E%9F%E7%94%9FSQl%EF%BC%8C%E9%9C%80%E8%A6%81%E6%B3%A8%E6%84%8F%E7%9A%84%E5%9D%91/"
    >Spring data jpa@query使用原生SQl，需要注意的坑</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2019/08/12/Spring-data-jpa-query%E4%BD%BF%E7%94%A8%E5%8E%9F%E7%94%9FSQl%EF%BC%8C%E9%9C%80%E8%A6%81%E6%B3%A8%E6%84%8F%E7%9A%84%E5%9D%91/" class="article-date">
  <time datetime="2019-08-12T15:16:44.000Z" itemprop="datePublished">2019-08-12</time>
</a>    
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <blockquote>
<p>原文地址: <a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_38608626/article/details/83183556">https://blog.csdn.net/weixin_38608626/article/details/83183556</a></p>
</blockquote>
<h4 id="根据代码来解说"><a href="#根据代码来解说" class="headerlink" title="根据代码来解说:"></a>根据代码来解说:</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Query(value = &quot;select bill.id_ as id, bill.created_date as date, bill.no, lawyer_case .case_no as caseNo, &quot; +</span></span><br><span class="line"><span class="meta">            &quot;lawyer_case .case_name as caseName, customer.no as customerNo, customer.cn_name as customerName, &quot; +</span></span><br><span class="line"><span class="meta">            &quot;bill.total_expense_after_tax, bill.collected_money, bill.book_ticket_amount, bill.version &quot; +</span></span><br><span class="line"><span class="meta">            &quot;e1.name as creator, bill.status&quot; +</span></span><br><span class="line"><span class="meta">            &quot;from bill &quot; +</span></span><br><span class="line"><span class="meta">            &quot;left join lawyer_case on lawyer_case .case_no=bill.case_no &quot; +</span></span><br><span class="line"><span class="meta">            &quot;left join customer on customer.no=bill.customer_no &quot; +</span></span><br><span class="line"><span class="meta">            &quot;left join employee e1 on e1.id_=bill.creator &quot; +</span></span><br><span class="line"><span class="meta">            &quot;where IF (?1!=&#x27;&#x27;, customer_no=?1, 1=1) &quot; +</span></span><br><span class="line"><span class="meta">            &quot;and   IF (?2!=&#x27;&#x27;, case_no=?2, 1=1) &quot; +</span></span><br><span class="line"><span class="meta">            &quot;and   IF (?3!=&#x27;&#x27;, status=?3, 1=1) &quot; +</span></span><br><span class="line"><span class="meta">            &quot;and   IF (?4!=&#x27;&#x27;, creator&#x27;%&#x27;,?4,&#x27;%&#x27;))</span>, <span class="number">1</span>=<span class="number">1</span>) <span class="string">&quot; +</span></span><br><span class="line"><span class="string">            &quot;</span>and   create_by=?<span class="number">5</span> <span class="string">&quot; +</span></span><br><span class="line"><span class="string">            &quot;</span>ORDER BY ?#&#123;#pageable&#125; <span class="string">&quot;,</span></span><br><span class="line"><span class="string">            countQuery = &quot;</span>select <span class="title function_">count</span><span class="params">(*)</span> <span class="string">&quot; +</span></span><br><span class="line"><span class="string">                    &quot;</span>from bill <span class="string">&quot; +</span></span><br><span class="line"><span class="string">                    &quot;</span>left join lawyer_case on lawyer_case .case_no=bill.case_no <span class="string">&quot; +</span></span><br><span class="line"><span class="string">                    &quot;</span>left join customer on customer.no=bill.customer_no <span class="string">&quot; +</span></span><br><span class="line"><span class="string">                    &quot;</span>left join employee e1 on e1.id_=bill.creator <span class="string">&quot; +</span></span><br><span class="line"><span class="string">                    &quot;</span>where <span class="title function_">IF</span> <span class="params">(?<span class="number">1</span>!=<span class="string">&#x27;&#x27;</span>, customer_no=?<span class="number">1</span>, <span class="number">1</span>=<span class="number">1</span>)</span> <span class="string">&quot; +</span></span><br><span class="line"><span class="string">                    &quot;</span>and   <span class="title function_">IF</span> <span class="params">(?<span class="number">2</span>!=<span class="string">&#x27;&#x27;</span>, case_no=?<span class="number">2</span>, <span class="number">1</span>=<span class="number">1</span>)</span> <span class="string">&quot; +</span></span><br><span class="line"><span class="string">                    &quot;</span>and   <span class="title function_">IF</span> <span class="params">(?<span class="number">3</span>!=<span class="string">&#x27;&#x27;</span>, status=?<span class="number">3</span>, <span class="number">1</span>=<span class="number">1</span>)</span> <span class="string">&quot; +</span></span><br><span class="line"><span class="string">                    &quot;</span>and   <span class="title function_">IF</span> <span class="params">(?<span class="number">4</span>!=<span class="string">&#x27;&#x27;</span>, creator<span class="string">&#x27;%&#x27;</span>,?<span class="number">4</span>,<span class="string">&#x27;%&#x27;</span>)</span>), <span class="number">1</span>=<span class="number">1</span>) <span class="string">&quot; +</span></span><br><span class="line"><span class="string">                    &quot;</span>and   create_by=?<span class="number">5</span> <span class="string">&quot;+</span></span><br><span class="line"><span class="string">                    &quot;</span>ORDER BY ?#&#123;#pageable&#125; <span class="string">&quot;,</span></span><br><span class="line"><span class="string">            nativeQuery = true)</span></span><br><span class="line"><span class="string">    Page&lt;Object[]&gt; findAllBill(String customerNo, String caseNo, Integer status, String creator,</span></span><br><span class="line"><span class="string">                               String createBy, Pageable pageable);</span></span><br></pre></td></tr></table></figure>

<p> 需要注意的方法有以下几点:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">1. From 不支持重命名.</span><br><span class="line">2. 返回的是一个page&lt;Object[]&gt;，数组中只保存了数据，没有对应的key，只能根据返回数据的顺序，依次注入到DTO中。</span><br><span class="line">3. 对于使用分页，需要：“ORDER BY ?#&#123;#pageable&#125;”，可以直接传入一个pageable对象，会自动解析。</span><br><span class="line">4. 注意格式问题，很多时候就是换行的时候，没有空格。</span><br><span class="line">5. 仔细对应数据库中表字段，很多时候报某个字段找不到，就是因为字段名写错，和数据库中对应不上。</span><br><span class="line">6. 这是解决使用微服务，大量的数据都需要远程调用，会降低程序的性能。</span><br><span class="line">7. 使用Pageabel作为参数的时候，去进行分页。刚开始的时候，觉得还是一个可行的办法，但是得注意的时候，当需要排序的时候，是无法加入sort字段的。 会一直报错left*。</span><br><span class="line">8. 针对7的解决方案，把原生SQL的数据查询和countQuery分成两个查询方法。得到count，然后进行判断，若是等于0，则直接返回空集合；反之，则取获取数据。 需要自己进行分页计算，传入正确的pageNumber和pageSize。 大部分系统都是按照修改时间进行降序排序。 所以，order by可以写死。然后pageNumber和pageSize动态传入。 pageNumber的算法= (pageNumber - 1) * pageSize, 前提是PageNumber是从1开始，若0，则pageNumber=pageNumber * PageSize； 这样就可以保证数据的正确。</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* pageInfos: 转换之后的数据。</span></span><br><span class="line"><span class="comment">* pageable：传入的pageable.</span></span><br><span class="line"><span class="comment">* totalPage: 第一条SQL算好的返回值。</span></span><br><span class="line"><span class="comment">* 这样就可以统一的返回各种pageDTO。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">private</span> Page&lt;T&gt; <span class="title function_">convertForPage</span><span class="params">(List&lt;T&gt; pageInfos, Pageable pageable, Integer totalPage)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">PageImpl</span>&lt;&gt;(pageInfos, pageable, totalPage);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/spring-data-jpa/" rel="tag">spring data jpa</a></li></ul>

    </footer>
  </div>

   
    
</article>

    
    <article
  id="post-学生的三个阶段"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2019/08/11/%E5%AD%A6%E7%94%9F%E7%9A%84%E4%B8%89%E4%B8%AA%E9%98%B6%E6%AE%B5/"
    >学生的三个阶段</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2019/08/11/%E5%AD%A6%E7%94%9F%E7%9A%84%E4%B8%89%E4%B8%AA%E9%98%B6%E6%AE%B5/" class="article-date">
  <time datetime="2019-08-11T09:36:54.000Z" itemprop="datePublished">2019-08-11</time>
</a>    
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <blockquote>
<p>来源视频: <a target="_blank" rel="noopener" href="https://www.bilibili.com/video/av61712206">https://www.bilibili.com/video/av61712206</a></p>
</blockquote>
<p>优秀的学生练思维</p>
<p>良好的学生找方法</p>
<p>一般的学生学知识</p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%AD%A6%E4%B9%A0/" rel="tag">学习</a></li></ul>

    </footer>
  </div>

   
    
</article>

    
    <article
  id="post-SpringBoot-jpa多条件查询（参数可能为空）语句"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2019/08/11/SpringBoot-jpa%E5%A4%9A%E6%9D%A1%E4%BB%B6%E6%9F%A5%E8%AF%A2%EF%BC%88%E5%8F%82%E6%95%B0%E5%8F%AF%E8%83%BD%E4%B8%BA%E7%A9%BA%EF%BC%89%E8%AF%AD%E5%8F%A5/"
    >SpringBoot jpa多条件查询（参数可能为空）语句</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2019/08/11/SpringBoot-jpa%E5%A4%9A%E6%9D%A1%E4%BB%B6%E6%9F%A5%E8%AF%A2%EF%BC%88%E5%8F%82%E6%95%B0%E5%8F%AF%E8%83%BD%E4%B8%BA%E7%A9%BA%EF%BC%89%E8%AF%AD%E5%8F%A5/" class="article-date">
  <time datetime="2019-08-11T09:01:41.000Z" itemprop="datePublished">2019-08-11</time>
</a>    
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <blockquote>
<p>原文地址 : <a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_36802726/article/details/81208853">https://blog.csdn.net/qq_36802726/article/details/81208853</a></p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">@Query(value = &quot;select * from xxx where if(?1 !=&#x27;&#x27;,x1=?1,1=1) and if(?2 !=&#x27;&#x27;,x2=?2,1=1)&quot; +</span><br><span class="line">            &quot;and if(?3 !=&#x27;&#x27;,x3=?3,1=1)  &quot;,nativeQuery = true)</span><br><span class="line">     List&lt;XXX&gt; find(String X1,String X2,String X3);</span><br></pre></td></tr></table></figure>

<p>工作的时候需求有搜索功能，有三个参数，但是网上找了很多关于jpa多条件查询的代码要么在调dao的时候用了大量if判断，那么需要写很多查询方法，要么说的不知所云，我结合jpa和mysql原语句研究了半天才弄出了这个方法。</p>
<p>xxx是数据库表名，x1、x2、x3为查询的字段名。</p>
<p>下面的大写的XXX是实体类的名，X1X2X3为查询的参数。</p>
<p>if(?1 !&#x3D;’’,x1&#x3D;?1,1&#x3D;1) 代表传入的参数X1如果不为””（Spring类型空是””而不是null）将参数传入x1，如果为空时显示1&#x3D;1 代表参数为真，对查询结果不产生作用。</p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/spring-data-jpa/" rel="tag">spring data jpa</a></li></ul>

    </footer>
  </div>

   
    
</article>

    
    <article
  id="post-Java代码乱象！"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2019/08/11/Java%E4%BB%A3%E7%A0%81%E4%B9%B1%E8%B1%A1%EF%BC%81/"
    >Java代码乱象！</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2019/08/11/Java%E4%BB%A3%E7%A0%81%E4%B9%B1%E8%B1%A1%EF%BC%81/" class="article-date">
  <time datetime="2019-08-11T05:58:19.000Z" itemprop="datePublished">2019-08-11</time>
</a>    
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <blockquote>
<p>原文地址: <a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/svYS4wNloWm25BrJH6KKXA">https://mp.weixin.qq.com/s/svYS4wNloWm25BrJH6KKXA</a></p>
</blockquote>
<p><img src="https://raw.githubusercontent.com/gaohanghang/images/master/img20190811135909.png"></p>
<p><strong>导读</strong></p>
<hr>
<p>查尔斯·狄更斯在《双城记》中写道：“这是一个最好的时代，也是一个最坏的时代。”</p>
<p>移动互联网的快速发展，出现了许多新机遇，很多创业者伺机而动；随着行业竞争加剧，互联网红利逐渐消失，很多创业公司九死一生。笔者在初创公司摸爬滚打数年，接触了各式各样的 Java 微服务架构，从中获得了一些优秀的理念，但也发现了一些不合理的现象。现在，笔者总结了一些创业公司存在的 Java 服务端乱象，并尝试性地给出了一些不成熟的建议。</p>
<h2 id="1-使用Controller基类和Service基类"><a href="#1-使用Controller基类和Service基类" class="headerlink" title="1.使用Controller基类和Service基类"></a>1.使用Controller基类和Service基类</h2><h3 id="1-1-现象描述"><a href="#1-1-现象描述" class="headerlink" title="1.1.现象描述"></a><strong>1.1.现象描述</strong></h3><h4 id="1-1-1-Controller-基类"><a href="#1-1-1-Controller-基类" class="headerlink" title="1.1.1.Controller 基类"></a>1.1.1.Controller 基类</h4><p>常见的 Controller 基类如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** 基础控制器类 */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BaseController</span> &#123;</span><br><span class="line">    <span class="comment">/** 注入服务相关 */</span></span><br><span class="line">    <span class="comment">/** 用户服务 */</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">protected</span> UserService userService;</span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** 静态常量相关 */</span></span><br><span class="line">    <span class="comment">/** 手机号模式 */</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">PHONE_PATTERN</span> <span class="operator">=</span> <span class="string">&quot;/^[1]([3-9])[0-9]&#123;9&#125;$/&quot;</span>;</span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** 静态函数相关 */</span></span><br><span class="line">    <span class="comment">/** 验证电话 */</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">static</span> <span class="title function_">vaildPhone</span><span class="params">(String phone)</span> &#123;...&#125;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>常见的 Controller 基类主要包含注入服务、静态常量和静态函数等，便于所有的Controller 继承它，并在函数中可以直接使用这些资源。</p>
<h4 id="1-1-2-Service-基类"><a href="#1-1-2-Service-基类" class="headerlink" title="1.1.2. Service 基类"></a><strong>1.1.2. Service 基类</strong></h4><p>常见的 Service 基类如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** 基础服务类 */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BaseService</span> &#123;</span><br><span class="line">    <span class="comment">/** 注入DAO相关 */</span></span><br><span class="line">    <span class="comment">/** 用户DAO */</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">protected</span> UserDAO userDAO;</span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** 注入服务相关 */</span></span><br><span class="line">    <span class="comment">/** 短信服务 */</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">protected</span> SmsService smsService;</span><br><span class="line">    ...</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/** 注入参数相关 */</span></span><br><span class="line">    <span class="comment">/** 系统名称 */</span></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;example.systemName&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">protected</span> String systemName;</span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** 静态常量相关 */</span></span><br><span class="line">    <span class="comment">/** 超级用户标识 */</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">long</span> <span class="variable">SUPPER_USER_ID</span> <span class="operator">=</span> <span class="number">0L</span>;</span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** 服务函数相关 */</span></span><br><span class="line">    <span class="comment">/** 获取用户函数 */</span></span><br><span class="line">    <span class="keyword">protected</span> UserDO <span class="title function_">getUser</span><span class="params">(Long userId)</span> &#123;...&#125;</span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** 静态函数相关 */</span></span><br><span class="line">    <span class="comment">/** 获取用户名称 */</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">static</span> String <span class="title function_">getUserName</span><span class="params">(UserDO user)</span> &#123;...&#125;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>常见的 Service 基类主要包括注入 DAO、注入服务、注入参数、静态常量、服务函数、静态函数等，便于所有的 Service 继承它，并在函数中可以直接使用这些资源。</p>
<h3 id="1-2-论证基类必要性"><a href="#1-2-论证基类必要性" class="headerlink" title="1.2.论证基类必要性"></a><strong>1.2.论证基类必要性</strong></h3><p>首先，了解一下里氏替换原则：</p>
<blockquote>
<p>里氏代换原则（Liskov Substitution Principle，简称LSP）：所有引用基类（父类）的地方必须能透明地使用其子类的对象。</p>
</blockquote>
<p>其次，了解一下基类的优点：</p>
<ul>
<li>子类拥有父类的所有方法和属性，从而减少了创建子类的工作量；</li>
<li>提高了代码的重用性，子类拥有父类的所有功能；</li>
<li>提高了代码的扩展性，子类可以添加自己的功能。</li>
</ul>
<p>所以，我们可以得出以下结论：</p>
<ul>
<li>Controller 基类和 Service 基类在整个项目中并没有直接被使用，也就没有可使用其子类替换基类的场景，所以不满足里氏替换原则；</li>
<li>Controller 基类和 Service 基类并没有抽象接口函数或虚函数，即所有继承基类的子类间没有相关共性，直接导致在项目中仍然使用的是子类；</li>
<li>Controller 基类和 Service 基类只关注了重用性，即子类能够轻松使用基类的注入DAO、注入服务、注入参数、静态常量、服务函数、静态函数等资源。但是，忽略了这些资源的必要性，即这些资源并不是子类所必须的，反而给子类带来了加载时的性能损耗。</li>
</ul>
<p><strong>综上所述</strong>，Controller 基类和 Service 基类只是一个杂凑类，并不是一个真正意义上的基类，需要进行拆分。</p>
<h3 id="1-3-拆分基类的方法"><a href="#1-3-拆分基类的方法" class="headerlink" title="1.3.拆分基类的方法"></a><strong>1.3.拆分基类的方法</strong></h3><p>由于 Service 基类比 Controller 基类更典型，本文以 Service 基类举例说明如何来拆分“基类”。</p>
<h4 id="1-3-1-把注入实例放入实现类"><a href="#1-3-1-把注入实例放入实现类" class="headerlink" title="1.3.1.把注入实例放入实现类"></a>1.3.1.把注入实例放入实现类</h4><p>根据“使用即引入、无用则删除”原则，在需要使用的实现类中注入需要使用的DAO、服务和参数。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** 用户服务类 */</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">    <span class="comment">/** 用户DAO */</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserDAO userDAO;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** 短信服务 */</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> SmsService smsService;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** 系统名称 */</span></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;example.systemName&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String systemName;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> 
      <a class="article-more-link" href="/2019/08/11/Java%E4%BB%A3%E7%A0%81%E4%B9%B1%E8%B1%A1%EF%BC%81/"
        >阅读更多...</a
      >
       
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/java/" rel="tag">java</a></li></ul>

    </footer>
  </div>

   
    
</article>

    
    <article
  id="post-如何成为讲话有趣的人"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2019/08/11/%E5%A6%82%E4%BD%95%E6%88%90%E4%B8%BA%E8%AE%B2%E8%AF%9D%E6%9C%89%E8%B6%A3%E7%9A%84%E4%BA%BA/"
    >《如何成为讲话有趣的人》</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2019/08/11/%E5%A6%82%E4%BD%95%E6%88%90%E4%B8%BA%E8%AE%B2%E8%AF%9D%E6%9C%89%E8%B6%A3%E7%9A%84%E4%BA%BA/" class="article-date">
  <time datetime="2019-08-11T05:51:10.000Z" itemprop="datePublished">2019-08-11</time>
</a>    
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h2 id="第一章-从故事开始"><a href="#第一章-从故事开始" class="headerlink" title="第一章 从故事开始"></a>第一章 从故事开始</h2><blockquote>
<p>故事是对生活的一种创造性转化，它让生活变得更有力度、清晰、有意义。故事是人类交流的货币。</p>
<p>— 罗伯特•麦基</p>
</blockquote>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/" rel="tag">读书笔记</a></li></ul>

    </footer>
  </div>

   
    
</article>

    
  </article>
  

  
  <nav class="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/19/">上一页</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/18/">18</a><a class="page-number" href="/page/19/">19</a><span class="page-number current">20</span><a class="page-number" href="/page/21/">21</a><a class="page-number" href="/page/22/">22</a><span class="space">&hellip;</span><a class="page-number" href="/page/44/">44</a><a class="extend next" rel="next" href="/page/21/">下一页</a>
  </nav>
  
</section>
</div>

      <footer class="footer">
  <div class="outer">
    <ul>
      <li>
        Copyrights &copy;
        2015-2023
        <i class="ri-heart-fill heart_icon"></i> 高行行
      </li>
    </ul>
    <ul>
      <li>
        
      </li>
    </ul>
    <ul>
      <li>
        
        
        <span>
  <span><i class="ri-user-3-fill"></i>访问人数:<span id="busuanzi_value_site_uv"></span></span>
  <span class="division">|</span>
  <span><i class="ri-eye-fill"></i>浏览次数:<span id="busuanzi_value_page_pv"></span></span>
</span>
        
      </li>
    </ul>
    <ul>
      
    </ul>
    <ul>
      
    </ul>
    <ul>
      <li>
        <!-- cnzz统计 -->
        
        <script type="text/javascript" src='https://s9.cnzz.com/z_stat.php?id=1278069914&amp;web_id=1278069914'></script>
        
      </li>
    </ul>
  </div>
</footer>    
    </main>
    <div class="float_btns">
      <div class="totop" id="totop">
  <i class="ri-arrow-up-line"></i>
</div>

<div class="todark" id="todark">
  <i class="ri-moon-line"></i>
</div>

    </div>
    <aside class="sidebar on">
      <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="/"><img src="/images/ayer-side.svg" alt="高行行的个人博客"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">主页</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/archives">归档</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories">分类</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags">标签</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" target="_blank" rel="noopener" href="http://gaohanghang.lofter.com">摄影</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/twitter">Twitter</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" target="_blank" rel="noopener" href="https://weibo.com/u/5125203090">微博</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/about">关于我</a>
    </li>
    
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      
      <a class="nav-item-link nav-item-search"  title="搜索">
        <i class="ri-search-line"></i>
      </a>
      
      
      <a class="nav-item-link" target="_blank" href="/atom.xml" title="RSS Feed">
        <i class="ri-rss-line"></i>
      </a>
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
    </aside>
    <div id="mask"></div>

<!-- #reward -->
<div id="reward">
  <span class="close"><i class="ri-close-line"></i></span>
  <p class="reward-p"><i class="ri-cup-line"></i>请我喝杯咖啡吧~</p>
  <div class="reward-box">
    
    <div class="reward-item">
      <img class="reward-img" src="/images/alipay.jpg">
      <span class="reward-type">支付宝</span>
    </div>
    
    
    <div class="reward-item">
      <img class="reward-img" src="/images/wechat.jpg">
      <span class="reward-type">微信</span>
    </div>
    
  </div>
</div>
    
<script src="/js/jquery-3.6.0.min.js"></script>
 
<script src="/js/lazyload.min.js"></script>

<!-- Tocbot -->

<script src="https://cdn.staticfile.org/jquery-modal/0.9.2/jquery.modal.min.js"></script>
<link
  rel="stylesheet"
  href="https://cdn.staticfile.org/jquery-modal/0.9.2/jquery.modal.min.css"
/>
<script src="https://cdn.staticfile.org/justifiedGallery/3.8.1/js/jquery.justifiedGallery.min.js"></script>

<script src="/dist/main.js"></script>

<!-- ImageViewer -->
 <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>

<link rel="stylesheet" href="https://cdn.staticfile.org/photoswipe/4.1.3/photoswipe.min.css">
<link rel="stylesheet" href="https://cdn.staticfile.org/photoswipe/4.1.3/default-skin/default-skin.min.css">
<script src="https://cdn.staticfile.org/photoswipe/4.1.3/photoswipe.min.js"></script>
<script src="https://cdn.staticfile.org/photoswipe/4.1.3/photoswipe-ui-default.min.js"></script>

<script>
    function viewer_init() {
        let pswpElement = document.querySelectorAll('.pswp')[0];
        let $imgArr = document.querySelectorAll(('.article-entry img:not(.reward-img)'))

        $imgArr.forEach(($em, i) => {
            $em.onclick = () => {
                // slider展开状态
                // todo: 这样不好，后面改成状态
                if (document.querySelector('.left-col.show')) return
                let items = []
                $imgArr.forEach(($em2, i2) => {
                    let img = $em2.getAttribute('data-idx', i2)
                    let src = $em2.getAttribute('data-target') || $em2.getAttribute('src')
                    let title = $em2.getAttribute('alt')
                    // 获得原图尺寸
                    const image = new Image()
                    image.src = src
                    items.push({
                        src: src,
                        w: image.width || $em2.width,
                        h: image.height || $em2.height,
                        title: title
                    })
                })
                var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, {
                    index: parseInt(i)
                });
                gallery.init()
            }
        })
    }
    viewer_init()
</script> 
<!-- MathJax -->

<!-- Katex -->

<!-- busuanzi  -->
 
<script src="/js/busuanzi-2.3.pure.min.js"></script>
 
<!-- ClickLove -->

<!-- ClickBoom1 -->

<!-- ClickBoom2 -->

<!-- CodeCopy -->
 
<link rel="stylesheet" href="/css/clipboard.css">
 <script src="https://cdn.staticfile.org/clipboard.js/2.0.10/clipboard.min.js"></script>
<script>
  function wait(callback, seconds) {
    var timelag = null;
    timelag = window.setTimeout(callback, seconds);
  }
  !function (e, t, a) {
    var initCopyCode = function(){
      var copyHtml = '';
      copyHtml += '<button class="btn-copy" data-clipboard-snippet="">';
      copyHtml += '<i class="ri-file-copy-2-line"></i><span>COPY</span>';
      copyHtml += '</button>';
      $(".highlight .code pre").before(copyHtml);
      $(".article pre code").before(copyHtml);
      var clipboard = new ClipboardJS('.btn-copy', {
        target: function(trigger) {
          return trigger.nextElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        let $btn = $(e.trigger);
        $btn.addClass('copied');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-checkbox-circle-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPIED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-checkbox-circle-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
      clipboard.on('error', function(e) {
        e.clearSelection();
        let $btn = $(e.trigger);
        $btn.addClass('copy-failed');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-time-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPY FAILED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-time-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
    }
    initCopyCode();
  }(window, document);
</script>
 
<!-- CanvasBackground -->

<script>
  if (window.mermaid) {
    mermaid.initialize({ theme: "forest" });
  }
</script>


    
    

  </div>
</body>

</html>